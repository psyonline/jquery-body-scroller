/*
* Fix Internet Explorer's delayed scroll event firing.
* by @psyonline (http://www.psyonline.kr/, majorartist@gmail.com)
* https://github.com/psyonline/jquery-body-scroller
* License - http://creativecommons.org/licenses/by-sa/2.0/kr/
*/
(function(k){function n(b){b=Math.min(u(),Math.max(0,(d.scrollTop||document.body&&document.body.scrollTop||0)+b));b!=l&&(p(b),q=!0,d.scrollTop=b)}function u(){return Math.max(document.body&&document.body.scrollHeight,d.scrollHeight)-Math.min(d.offsetHeight,d.clientHeight)}function v(b){b.preventDefault()}function y(b,a,h,d){var c={},e,f,g;if(k.isPlainObject(a))for(e in a)c[e]=a[e];else"function"==typeof d?(c.duration=a,c.easing=h,c.complete=d):"function"==typeof h?("number"==typeof a?c.duration=a:
c.easing=a,c.complete=h):"number"==typeof a?c.duration=a:"string"==typeof a?c.easing=a:"function"==typeof a&&(c.complete=a);f=c.step;g=c.complete;c.step=function(a){a=Math.round("number"==typeof a?a:a.target[0].v);w?n(a-l):r.scrollTop(a);f&&f(a)};c.complete=function(a){m=!1;t.unbind("mousewheel",v);g&&g(l)};m=!0;t.bind("mousewheel",v);x[0].v=l;x.stop().animate({v:b},c)}function p(b){b="number"==typeof b?b:d.scrollTop||document.body&&document.body.scrollTop||0;var a,h;l=b;if(q)return q=!1;h=u();for(a=
0;a<e;a++)f[a](b,h)}var w=!1,z=navigator.userAgent.match(/(?:msie ([0-9]+)|rv:([0-9\.]+)\) like gecko)/i);/applewebkit/i.test(navigator.userAgent);var r=k(window),d=document.documentElement,t=k(d),l=0,q=!1,g=!1,m=!1,f=[],e=0,x=k({v:0});k._bodyScroller={on:function(){g=!1},off:function(){g=!0},addEvent:function(b){a:{for(var a=0;a<e;a++)if(f[a]===b)break a;f.push(b);e++;p()}},removeEvent:function(b){for(var a=0;a<e;a++)f[a]===b&&(f.splice(a,1),e--,a--)},scrollTo:function(b,a,d,e){2>arguments.length?
r.scrollTop(b):y(b,a,d,e)}};/win/i.test(navigator.appVersion)&&z&&(t.on("mousewheel",function(b){if(g||m||!e)return!0;n(b.originalEvent.deltaY||-1*b.originalEvent.wheelDelta);b.preventDefault()}).on("keydown",function(b){if(g||m||!e)return!0;var a=b.keyCode,f=d.clientHeight;/^(32|33|34|38|40)$/.test(a)&&(n(32==a||34==a?f:33==a?-f:38==a?-75:75),b.preventDefault())}).on("keydown","input, textarea",function(b){b.stopPropagation()}),w=!0);r.scroll(p)})(window.jQuery);